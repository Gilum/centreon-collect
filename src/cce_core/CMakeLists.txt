include_directories(${CMAKE_BINARY_DIR})
include_directories(${CONAN_INCLUDE_DIRS_GRPC})
include_directories(${CONAN_INCLUDE_DIRS_PROTOBUF})

configure_file(${CMAKE_SOURCE_DIR}/include/compatibility/locations.h.in ${CMAKE_BINARY_DIR}/locations.h)
configure_file(${CMAKE_SOURCE_DIR}/include/compatibility/common.h.in ${CMAKE_BINARY_DIR}/common.h)
configure_file(${CMAKE_SOURCE_DIR}/include/com/centreon/engine/version.hh.in ${CMAKE_BINARY_DIR}/engine-version.hh)

add_library(cce_core
  STATIC
  ${CMAKE_SOURCE_DIR}/src/cce_core/broker/compatibility.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/broker/loader.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/broker/handle.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/checks/checker.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/checks/stats.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/commands/command.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/commands/connector.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/commands/environment.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/commands/forward.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/commands/raw.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/commands/result.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/compatibility/common.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/compatibility/embedded_perl.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/compatibility/globals.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/compatibility/logging.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/compatibility/mmap.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/compatibility/sighandlers.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/compatibility/utils.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/anomalydetection.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/command.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/connector.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/contact.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/contactgroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/daterange.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/group.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/host.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/hostdependency.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/hostescalation.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/hostextinfo.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/hostgroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/object.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/parser.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/point_2d.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/point_3d.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/state.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/service.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/servicedependency.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/serviceescalation.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/serviceextinfo.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/servicegroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/timeperiod.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/timerange.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/anomalydetection.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/command.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/connector.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/contact.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/contactgroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/host.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/hostdependency.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/hostescalation.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/hostgroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/globals.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/logging.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/macros.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/scheduler.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/service.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/servicedependency.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/serviceescalation.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/servicegroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/state.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/configuration/applier/timeperiod.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/downtimes/downtime.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/downtimes/downtime_manager.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/downtimes/host_downtime.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/downtimes/service_downtime.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/downtimes/downtime_finder.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/events/loop.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/events/sched_info.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/events/timed_event.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/logging/broker.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/logging/debug_file.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/clear_host.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/clear_hostgroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/clear_service.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/clear_servicegroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/grab_host.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/grab_service.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/grab_value.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/misc.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros/process.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/comment.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/contact.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/downtime.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/dump.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/host.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/info.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/parser.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/program.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/object.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/service.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/state.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/comment.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/contact.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/downtime.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/host.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/program.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/service.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/state.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/retention/applier/utils.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/anomalydetection.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/broker.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/checkable.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/check_result.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/command_manager.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/comment.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/config.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/contact.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/contactgroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/customvariable.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/daterange.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/dependency.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/diagnostic.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/exceptions/error.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/flapping.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/escalation.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/globals.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/host.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/hostdependency.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/hostescalation.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/hostgroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/macros.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/nebmods.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/notification.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/notifier.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/sehandlers.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/service.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/servicedependency.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/serviceescalation.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/servicegroup.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/shared.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/statistics.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/statusdata.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/string.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/timeperiod.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/timerange.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/timezone_locker.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/timezone_manager.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/utils.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/xpddefault.cc
  ${CMAKE_SOURCE_DIR}/src/cce_core/xsddefault.cc
)

add_dependencies(cce_core engine_rpc)

# Link target with required libraries.
target_link_libraries(cce_core centreon_clib CONAN_PKG::json11)
